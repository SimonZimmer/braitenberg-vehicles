<!DOCTYPE html>
<meta charset="utf-8">
<style>
.light {
  fill: #ff0;
  fill-opacity: 0.5;
}
.vehicle {
  stroke: #000;
  stroke-width: 1.5px;
  fill: #888;
  fill-opacity: 1.0;
}
</style>

<body>
<script src="//cdnjs.cloudflare.com/ajax/libs/d3/4.1.1/d3.min.js"></script>
<script src="collision.js"></script>
<script src="vehicles.js"></script>
<script src="environment.js"></script>
<script>

var width = 1200,
    height = 800;
    margin = 5;

var minVelocity = 0.,
    maxVelocity = 4.,
    numVehicles = 1,
    numLights = 12,
    lightFactor = 100000.,
    lightDistance = 100.,
    noisyMotion = 0.1;

var vehicles_data = Array.apply(null, Array(numVehicles)).map(function (_, i) {
  var v = 0;//Math.random()*1.;
  return {
    x: Math.random() * width,
    y: Math.random() * height,
    vx: 0,
    vy: 0,
    vl: v,
    vr: v,
    ang: Math.random()*Math.PI*2,
    w: 60,
    h: 80
  };
});

var lights_data = Array.apply(null, Array(numLights)).map(function (_, i) {
  return {
    x: Math.random() * width,
    y: Math.random() * height,
    strength: Math.random() * 0.8 + 0.2
  }
})

var svg = d3.select('body').append('svg')
    .attr('width', width)
    .attr('height', height);

var [vehicles, simulation] = createVehicles(vehicles_data);
var lights = createCircularLight(lights_data);

</script>
